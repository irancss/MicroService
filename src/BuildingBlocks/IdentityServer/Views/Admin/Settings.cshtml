@{
    ViewData["Title"] = "تنظیمات";
    Layout = "_AdminLayout";
}

<div class="row">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">تنظیمات عمومی</h5>
            </div>
            <div class="card-body">
                <form>
                    <div class="mb-3">
                        <label class="form-label">نام سیستم</label>
                        <input type="text" class="form-control" value="IdentityServer8 Microservice">
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">URL اصلی</label>
                        <input type="url" class="form-control" value="https://localhost:5001">
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">مدت اعتبار کد تایید (دقیقه)</label>
                        <input type="number" class="form-control" value="5" min="1" max="30">
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">حداکثر تلاش ناموفق</label>
                        <input type="number" class="form-control" value="5" min="3" max="10">
                    </div>
                    
                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="enableSms" checked>
                        <label class="form-check-label" for="enableSms">
                            فعال کردن ارسال SMS
                        </label>
                    </div>
                    
                    <button type="submit" class="btn btn-primary">ذخیره تغییرات</button>
                </form>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">تنظیمات SMS</h5>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <label class="form-label">ارائه‌دهنده SMS</label>
                    <select class="form-select">
                        <option value="Local" selected>Local (تست)</option>
                        <option value="KaveNegar">کاوه نگار</option>
                        <option value="Twilio">Twilio</option>
                    </select>
                </div>
                
                <div class="mb-3">
                    <label class="form-label">API Key</label>
                    <input type="password" class="form-control" placeholder="API Key خود را وارد کنید">
                </div>
                
                <div class="alert alert-info">
                    <small>
                        <i class="fas fa-info-circle"></i>
                        در حالت Local، پیامک‌ها در لاگ نمایش داده می‌شوند.
                    </small>
                </div>
            </div>
        </div>
        
        <div class="card mt-3">
            <div class="card-header">
                <h5 class="card-title mb-0">عملیات سیستم</h5>
            </div>
            <div class="card-body">
                <div class="d-grid gap-2">
                    <button class="btn btn-warning" onclick="clearCache()">
                        <i class="fas fa-trash-alt"></i> پاک کردن Cache
                    </button>
                    <button class="btn btn-info" onclick="exportUsers()">
                        <i class="fas fa-download"></i> خروجی کاربران
                    </button>
                    <button class="btn btn-secondary" onclick="viewLogs()">
                        <i class="fas fa-file-alt"></i> مشاهده لاگ‌ها
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        function clearCache() {
            if (confirm('آیا از پاک کردن cache اطمینان دارید؟')) {
                alert('Cache پاک شد');
            }
        }
        
        function exportUsers() {
            window.open('/admin/users/export', '_blank');
        }
        
        function viewLogs() {
            window.location.href = '/admin/logs';
        }
    </script>
}
